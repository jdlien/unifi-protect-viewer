appId: 'com.jdlien.unifi-protect-viewer'
productName: 'UniFi Protect Viewer'

asar: true
asarUnpack:
  - 'node_modules/**/*.node'
afterPack: './scripts/afterPack.js'

directories:
  output: 'dist'
  buildResources: 'build'

files:
  - 'out/**/*'
  - 'src/html/**/*'
  - 'src/css/**/*'
  - 'src/img/**/*'
  - 'node_modules/**/*'
  - 'package.json'

publish:
  provider: 'github'
  owner: 'jdlien'
  repo: 'unifi-protect-viewer'
  releaseType: 'release'
  vPrefixedTagName: true
  publishAutoUpdate: true

generateUpdatesFilesForAllChannels: true

mac:
  category: 'public.app-category.utilities'
  target:
    - 'dmg'
    - 'zip'
  icon: 'src/img/icon.icns'
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: 'build/entitlements.mac.plist'
  entitlementsInherit: 'build/entitlements.mac.plist'
  darkModeSupport: true
  notarize: true
  timestamp: 'http://timestamp.apple.com/ts01'
  artifactName: 'UniFi-Protect-Viewer-${arch}.${ext}'

win:
  target:
    - target: 'nsis'
      arch:
        - 'x64'
        - 'arm64'
    - target: 'zip'
      arch:
        - 'x64'
        - 'arm64'
  icon: 'src/img/256.png'
  signtoolOptions:
    sign: './scripts/sign.js'
    certificateSubjectName: 'SSL.com'
    signingHashAlgorithms:
      - 'sha256'
  artifactName: 'UniFi-Protect-Viewer-Setup-${arch}.${ext}'

linux:
  target:
    - 'AppImage'
    - 'deb'
  category: 'Utility'
  artifactName: 'UniFi-Protect-Viewer-${arch}.${ext}'
